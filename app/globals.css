@import "tailwindcss";

/* include utility classes in streamdown */
@source '../node_modules/streamdown/dist/index.js';

/* Add KaTeX CSS for math rendering */
@import 'katex/dist/katex.min.css';

/* custom variant for setting dark mode programmatically */
@custom-variant dark (&:is(.dark, .dark *));

/* include plugins */
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* define design tokens (light mode) - Perfume Theme */
:root {
  --background: hsl(0 0% 100%);
  --foreground: hsl(280 15% 15%);
  --card: hsl(0 0% 100%);
  --card-foreground: hsl(280 15% 15%);
  --popover: hsl(0 0% 100%);
  --popover-foreground: hsl(280 15% 15%);
  --primary: hsl(320 65% 55%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(320 20% 96%);
  --secondary-foreground: hsl(280 15% 20%);
  --muted: hsl(320 15% 96%);
  --muted-foreground: hsl(280 10% 45%);
  --accent: hsl(320 40% 92%);
  --accent-foreground: hsl(280 15% 20%);
  --destructive: hsl(0 84.2% 60.2%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(320 20% 88%);
  --input: hsl(320 20% 88%);
  --ring: hsl(320 65% 55%);
  --chart-1: hsl(320 70% 60%);
  --chart-2: hsl(280 60% 55%);
  --chart-3: hsl(340 65% 58%);
  --chart-4: hsl(300 50% 65%);
  --chart-5: hsl(310 55% 62%);
  --sidebar-background: hsl(320 15% 98%);
  --sidebar-foreground: hsl(280 15% 25%);
  --sidebar-primary: hsl(320 65% 55%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(320 30% 94%);
  --sidebar-accent-foreground: hsl(280 15% 20%);
  --sidebar-border: hsl(320 20% 90%);
  --sidebar-ring: hsl(320 65% 55%);
  /* border radius unit */
  --radius: 0.5rem;
  --sidebar: hsl(320 15% 98%);
}

/* define design tokens (dark mode) - Perfume Theme */
.dark {
  --background: hsl(280 15% 8%);
  --foreground: hsl(320 10% 95%);
  --card: hsl(280 15% 10%);
  --card-foreground: hsl(320 10% 95%);
  --popover: hsl(280 15% 10%);
  --popover-foreground: hsl(320 10% 95%);
  --primary: hsl(320 70% 65%);
  --primary-foreground: hsl(280 20% 10%);
  --secondary: hsl(280 12% 18%);
  --secondary-foreground: hsl(320 10% 95%);
  --muted: hsl(280 12% 18%);
  --muted-foreground: hsl(320 8% 65%);
  --accent: hsl(280 15% 20%);
  --accent-foreground: hsl(320 10% 95%);
  --destructive: hsl(0 62.8% 30.6%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(280 12% 20%);
  --input: hsl(280 12% 20%);
  --ring: hsl(320 70% 65%);
  --chart-1: hsl(320 75% 65%);
  --chart-2: hsl(280 70% 60%);
  --chart-3: hsl(340 75% 68%);
  --chart-4: hsl(300 65% 70%);
  --chart-5: hsl(310 70% 67%);
  --sidebar-background: hsl(280 15% 12%);
  --sidebar-foreground: hsl(320 10% 90%);
  --sidebar-primary: hsl(320 70% 65%);
  --sidebar-primary-foreground: hsl(280 20% 10%);
  --sidebar-accent: hsl(280 15% 22%);
  --sidebar-accent-foreground: hsl(320 10% 90%);
  --sidebar-border: hsl(280 12% 20%);
  --sidebar-ring: hsl(320 70% 65%);
  --sidebar: hsl(280 15% 12%);
}

/* define theme */
@theme {
  --font-sans: var(--font-geist);
  --font-mono: var(--font-geist-mono);

  --breakpoint-toast-mobile: 600px;

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@utility -webkit-overflow-scrolling-touch {
  -webkit-overflow-scrolling: touch;
}

@utility touch-pan-y {
  touch-action: pan-y;
}

@utility overscroll-behavior-contain {
  overscroll-behavior: contain;
}

@layer utilities {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    position: relative;
  }

  html {
    overflow-x: hidden;
  }
}

.skeleton {
  * {
    pointer-events: none !important;
  }

  *[class^="text-"] {
    color: transparent;
    @apply rounded-md bg-foreground/20 select-none animate-pulse;
  }

  .skeleton-bg {
    @apply bg-foreground/10;
  }

  .skeleton-div {
    @apply bg-foreground/20 animate-pulse;
  }
}

.ProseMirror {
  outline: none;
}

.cm-editor,
.cm-gutters {
  @apply bg-background! dark:bg-zinc-800! outline-hidden! selection:bg-zinc-900!;
}

.ͼo.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground,
.ͼo.cm-selectionBackground,
.ͼo.cm-content::selection {
  @apply bg-zinc-200! dark:bg-zinc-900!;
}

.cm-activeLine,
.cm-activeLineGutter {
  @apply bg-transparent!;
}

.cm-activeLine {
  @apply rounded-r-sm!;
}

.cm-lineNumbers {
  @apply min-w-7;
}

.cm-foldGutter {
  @apply min-w-3;
}

.cm-lineNumbers .cm-activeLineGutter {
  @apply rounded-l-sm!;
}

.suggestion-highlight {
  @apply bg-primary/20 hover:bg-primary/30 dark:hover:bg-primary/40 dark:text-primary-foreground dark:bg-primary/30;
}

/* minimal scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: --alpha(var(--muted-foreground) / 0.5);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
